

<%- include("../partials/header") %> <%- include("../partials/navbar") %>

<!-- css for justified Gallery -->
<link
   rel="stylesheet"
   href="../../JustifiedGalleryFiles/justifiedGallery.min.css"
/>
<h1></h1>

<!-- adding leaflet map links -->
<link
   rel="stylesheet"
   href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css"
/>



<!-- edit button -->
<% if(currentUser && currentUser._id.equals(contentOwner._id)){ %>
   <a class="btn btn-primary btn-md " href="/albums/<%= album._id%>/edit/">edit album</a>
   <%  } %>


   <!--gettting data to use in script --- might need to find better way to do this-- data esposed and looks ugly-->
<p id="photoData" data-photos="<%= JSON.stringify(photoList)%>" hidden></p>
   <!-- map  --><!-- TODO -- hide map if no images with GPS tags or have it show home location -->

<% if(photoList && ( photoList.length >0 )){%>

   <h1 class="sectionTitle">location of photos from album</h1>
   
   <% }%>
   <div id="mapid"></div>


<!-- iamge gallery -->

<h1 class="albumName"> <%= album.alb_Name%></h1>
<h2 class="albumDesc"> <%= album.alb_description%></h2>
<h3>Submitted by <a href="../users/<%= album.alb_AuthorId%>/profile"</a><%= album.alb_AuthorName%></a> on <%= album.alb_DateCreated%></h3>
<h3>Last update: <%= album.alb_LastUpdate%> </h3>
<div id="photoGallery">
    <% if( photosFound.length >0 ){ photosFound.forEach((photo, ndx) =>{%>
 
    <a href="/photos/<%= photo._id %>/photo">
       <img
          class="justifiedGalImg"
          alt="<%= photo.caption %>"
          src="/uploads/<%= photo.fileName %>"
       />
    </a>
 
    <% })} else{ %>
       <h2>No results to display</h2>
       <% }%>
 </div>

<!--//////////////////////  -->
<!-- Scripts  -->
<!--//////////////////////  -->

<!-- jquerry -- needed for justified gallery -->
<script
   src="https://code.jquery.com/jquery-3.5.1.min.js"
   integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
   crossorigin="anonymous"
></script>

<!-- script for including justified gallery -->
<script src="../../JustifiedGalleryFiles/jquery.justifiedGallery.min.js"></script>

<!-- justified gallery script for page -->
<script src="scripts/resizeJustGalScript.js"></script>
<!-- loading map script-->
<script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
<script src="scripts/profileMapScript.js"></script>   





<%- include("../partials/footer") %>
